# Диски и монтирование

> `lsblk` - посмотреть все разделы и диски в системе, точки монтирования. Ключ `-f` - покажет файловые системы и UUID. 

> `blkid` - показывает UUID и PARTUUID разделов в системе

---

1. `/etc/fstab` - файл для автомонтирования (автоподключения) дисков и разделов в точки монтирования.

2. Перед монтированием нужно создать/пересоздать таблицу разделов - `fdisk /dev/sdX`, где `X` - буква нового диска.
   
  2.1 Дальше попадаем в консоль.

    m - открыть помощь   
    g - новая таблица разделов GPT
    n - новый раздел (Читаем все, что будет выведено, там указываются настройки - можно все протыкать по умолчанию)
    w - записать изменения и выйти
    q - выйти без изменений

3. После создания таблицы и разделов, должен появиться раздел, с названием `/dev/sdX1` нужно создать файловую систему.

   3.1 Создается ФС командой mkfs, указанием файловой системы и целевого диска/раздела - `mkfs.ext4 /dev/sdX1` или `mkfs.ntfs /dev/sdX1`

4. Дальше можно проверить все что было создано, но своими руками.

   4.1 `mount /dev/sdX1 /нужная_директория` - примонтировать раздел в директорию.

   4.2 `umount /dev/sdX1` или `umount /примонтированная_директория` - размонтировать диск

5. Если ошибок нет - можно приступать к `/etc/fstab`.

   5.1 Какие-то данные после установки уже будут, их трогать совсем не рекомендуется.

   5.2 Добавляем новую строку, в которой указываем параметры для монтирования диска в следующем формате:

   ```bash
     <device>   <dir>   <type>   <options>   <dump>   <fsck>
   ```
   где:

   ![test1_waifu2x_art_scan_scale (1)](https://github.com/user-attachments/assets/8ce8fe9b-9c4a-4817-a32b-c5b187df291d)

   __device__ - путь до раздела или его идентификатор;
   __dir__ - целевая директория;
   __type__ - файловая система раздела;
   __options__ - опции монтирования, например, владелец каталога или параметры аутентификации. Обычно ставится `defaults`.
   __dump__ - указываем, нужно ли делать дамп системы 
   __fsck__ — нужно ли проверять файловую систему при помощи fsck. Стоит очень аккуратно относится к данному параметру, так как не со всеми файловыми системами утилита fsck корректно работает. Если нет уверенности, ставим 0. Доступны значения:
       - 0 — не выполнять проверку.
       - 1 — проверять с высоким приоритетом. Рекомендовано только для корневого раздела.
       - 2 — проверять с низким приоритетом.
